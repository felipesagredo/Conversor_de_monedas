(function(){"use strict";var e={6503:function(e,t,a){var o=a(9242),n=a(3396);const r={id:"app"},s={key:1};function l(e,t,a,o,l,i){const c=(0,n.up)("LoginComponent"),u=(0,n.up)("ConversorComponent");return(0,n.wg)(),(0,n.iD)("div",r,[l.isLoggedIn?((0,n.wg)(),(0,n.iD)("div",s,[(0,n.Wm)(u,{onLogout:i.handleLogout},null,8,["onLogout"])])):((0,n.wg)(),(0,n.j4)(c,{key:0,onLoginSuccess:i.handleLoginSuccess},null,8,["onLoginSuccess"]))])}var i=a(7139);const c=e=>((0,n.dD)("data-v-7e9c0cdd"),e=e(),(0,n.Cn)(),e),u={class:"container"},d={class:"row"},m={class:"btn-container col-md-12"},p={class:"col-md-4"},g={class:"conversion-section rounded p-4"},f=c((()=>(0,n._)("h2",{class:"text-orange"},"Conversión UF a CLP",-1))),h={class:"form-group"},v=c((()=>(0,n._)("label",{for:"amount",class:"text-dark"},"Cantidad de UF:",-1))),w={class:"form-group"},_=c((()=>(0,n._)("label",{for:"date",class:"text-dark"},"Fecha:",-1))),b=c((()=>(0,n._)("br",null,null,-1))),y=c((()=>(0,n._)("button",{type:"submit",class:"btn btn-primary"},"Convertir UF a CLP",-1))),D={key:0,class:"mt-3"},U={class:"text-danger"},C={key:1,class:"estilo-datos"},x=c((()=>(0,n._)("h3",{class:"mt-5 text-orange"},"Datos Consultados:",-1))),k={class:"text-dark"},L=c((()=>(0,n._)("br",null,null,-1))),S=c((()=>(0,n._)("br",null,null,-1))),F=c((()=>(0,n._)("br",null,null,-1))),V=c((()=>(0,n._)("br",null,null,-1))),T=c((()=>(0,n._)("br",null,null,-1))),P={class:"col-md-6"},$={class:"data-section rounded p-4"},z=c((()=>(0,n._)("h2",{class:"text-gris"},"Historial de Consultas",-1))),E=c((()=>(0,n._)("br",null,null,-1))),M=c((()=>(0,n._)("br",null,null,-1))),N={key:0,class:"estilo-datos"},O={class:"card-body"},Z={class:"card-title"},I={class:"card-text"},A={class:"card-text"},B={class:"card-text"},j={class:"card-text"},R=["onClick"];function q(e,t,a,r,s,l){return(0,n.wg)(),(0,n.iD)("div",u,[(0,n._)("div",d,[(0,n._)("div",m,[(0,n._)("button",{onClick:t[0]||(t[0]=(...e)=>l.logout&&l.logout(...e)),class:"btn btn-outline-secondary"},"Cerrar Sesión")]),(0,n._)("div",p,[(0,n._)("div",g,[f,(0,n._)("form",{onSubmit:t[3]||(t[3]=(0,o.iM)(((...e)=>l.convertUF&&l.convertUF(...e)),["prevent"])),class:"mb-4"},[(0,n._)("div",h,[v,(0,n.wy)((0,n._)("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=e=>s.amount=e),id:"amount",step:"1",min:"0",class:"form-control custom-input"},null,512),[[o.nr,s.amount]])]),(0,n._)("div",w,[_,(0,n.wy)((0,n._)("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=e=>s.selectedDate=e),class:"form-control custom-input"},null,512),[[o.nr,s.selectedDate]])]),b,y],32),s.error?((0,n.wg)(),(0,n.iD)("div",D,[(0,n._)("p",U,(0,i.zw)(s.error),1)])):s.ufValue?((0,n.wg)(),(0,n.iD)("div",C,[x,(0,n._)("p",k,[(0,n.Uk)(" Fecha: "+(0,i.zw)(l.formattedDate(s.ufValue.fecha)),1),L,(0,n.Uk)(" Hora: "+(0,i.zw)(s.currentTime),1),S,(0,n.Uk)(" Valor UF: $"+(0,i.zw)(s.ufValue.valor.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")),1),F,(0,n.Uk)(" Cantidad de UF: "+(0,i.zw)(s.ufQuantity?s.ufQuantity.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."):"N/A"),1),V,(0,n.Uk)(" Cantidad de UF en CLP: $"+(0,i.zw)(l.convertedAmount),1),T])])):(0,n.kq)("",!0)])]),(0,n._)("div",P,[(0,n._)("div",$,[z,(0,n._)("button",{onClick:t[4]||(t[4]=(...e)=>l.getSavedData&&l.getSavedData(...e)),class:"btn btn-primary"},"Ver datos"),(0,n._)("button",{onClick:t[5]||(t[5]=(...e)=>l.exportToExcel&&l.exportToExcel(...e)),class:"btn btn-success"},"Exportar a Excel"),E,M,s.savedData.length>0?((0,n.wg)(),(0,n.iD)("div",N,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.reversedSavedData,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"card",key:e._id},[(0,n._)("div",O,[(0,n._)("h5",Z,(0,i.zw)(e.message),1),(0,n._)("p",I,"Hora: "+(0,i.zw)(e.currentTime),1),(0,n._)("p",A,"Valor UF: $"+(0,i.zw)(e.ufValor?e.ufValor.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."):"N/A"),1),(0,n._)("p",B,"Cantidad de UF: "+(0,i.zw)(e.amount?e.amount.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."):"N/A"),1),(0,n._)("p",j,(0,i.zw)(e.amount)+(0,i.zw)(e.additionalMessage),1),(0,n._)("button",{onClick:t=>l.deleteData(e._id),class:"btn btn-danger ml-auto"},"Eliminar",8,R)])])))),128))])):(0,n.kq)("",!0)])])])])}a(6229),a(7330),a(2062);var H=a(4161),Q=a(7092),W={data(){return{ufValue:null,selectedDate:null,amount:null,error:null,newMessage:"",ufValor:null,currentTime:null,ufQuantity:null,additionalMessage:"",data:null,savedData:[]}},computed:{convertedAmount(){if(!this.amount||!this.ufValue)return 0;const e=Math.ceil(this.amount*this.ufValue.valor);return new Intl.NumberFormat("es-CL",{maximumFractionDigits:0}).format(e)},reversedSavedData(){return this.savedData.slice().reverse()}},methods:{async convertUF(){if(!this.selectedDate)return void(this.error="Seleccione una fecha.");const e=parseFloat(this.amount);if(isNaN(e)||e<=0)return void(this.error="Ingrese una cantidad válida de UF.");const t=(new Date).toLocaleTimeString();this.currentTime=t;const a=this.formatDate(this.selectedDate);try{const e=await H.Z.get(`http://localhost:3000/uf/${a}`);this.ufValue=e.data.serie[0],this.error=null,this.ufQuantity=this.amount,this.ufValor=this.ufValue.valor;const t=`Fecha: ${a}`,o=`UF en CLP: $${this.convertedAmount}`;await this.addDataToDatabase(t,o,this.ufQuantity,this.ufValor,this.currentTime),await this.getSavedData()}catch(o){console.error("Error al obtener el valor de la UF:",o),this.error="Error al obtener el valor de la UF."}},exportToExcel(){const e=[["Fecha","Hora","Valor UF","Cantidad de UF","Conversion UF a CLP"],...this.savedData.map((e=>[e.message,e.currentTime,e.ufValor?`$${e.ufValor.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}`:"N/A",e.amount?e.amount.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."):"N/A",e.additionalMessage]))],t=Q.P6.aoa_to_sheet(e),a=Q.P6.book_new();Q.P6.book_append_sheet(a,t,"Historial_consultas");const o=Q.cW(a,{bookType:"xlsx",type:"array"}),n=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download="historial_consultas.xlsx",s.click()},async addDataToDatabase(e,t,a,o,n){try{const r=await H.Z.post("http://localhost:3000/api/data",{message:e,additionalMessage:t,amount:a,ufValor:o,currentTime:n});this.data=r.data}catch(r){console.error("Error al agregar el dato:",r)}},formatDate(e){const[t,a,o]=e.split("-");return`${o}-${a}-${t}`},formattedDate(e){const t={year:"numeric",month:"long",day:"numeric"};return new Date(e).toLocaleDateString("es-CL",t)},async getSavedData(){try{const e=await H.Z.get("http://localhost:3000/api/data");this.savedData=e.data,0===this.savedData.length&&alert("No hay datos para mostrar.")}catch(e){console.error("Error al obtener datos:",e)}},async deleteData(e){try{await H.Z.delete(`http://localhost:3000/api/data/${e}`),this.savedData=this.savedData.filter((t=>t._id!==e))}catch(t){console.error("Error al eliminar el dato:",t)}},logout(){this.$emit("logout")}},emits:["logout"]},K=a(89);const Y=(0,K.Z)(W,[["render",q],["__scopeId","data-v-7e9c0cdd"]]);var G=Y;const J=e=>((0,n.dD)("data-v-792db622"),e=e(),(0,n.Cn)(),e),X={class:"container mt-5"},ee={class:"row"},te={class:"col-md-6"},ae=J((()=>(0,n._)("h2",null,"Inicia Sesión",-1))),oe={class:"form-group"},ne=J((()=>(0,n._)("label",{for:"username"},"Usuario:",-1))),re={class:"form-group"},se=J((()=>(0,n._)("label",{for:"password"},"Contraseña:",-1))),le=J((()=>(0,n._)("button",{type:"submit",class:"btn btn-primary"},"Iniciar Sesión",-1))),ie=J((()=>(0,n._)("br",null,null,-1))),ce=J((()=>(0,n._)("br",null,null,-1))),ue=J((()=>(0,n._)("br",null,null,-1))),de=J((()=>(0,n._)("br",null,null,-1))),me=J((()=>(0,n._)("br",null,null,-1))),pe={class:"col-md-6"},ge=J((()=>(0,n._)("h2",null,"Regístrate",-1))),fe={class:"form-group"},he=J((()=>(0,n._)("label",{for:"newUsername"},"Nuevo Usuario:",-1))),ve={class:"form-group"},we=J((()=>(0,n._)("label",{for:"newPassword"},"Contraseña:",-1))),_e=J((()=>(0,n._)("button",{type:"submit",class:"btn btn-success"},"Registrarse",-1)));function be(e,t,a,r,s,l){return(0,n.wg)(),(0,n.iD)("div",X,[(0,n._)("div",ee,[(0,n._)("div",te,[ae,(0,n._)("form",{onSubmit:t[2]||(t[2]=(0,o.iM)(((...e)=>l.login&&l.login(...e)),["prevent"]))},[(0,n._)("div",oe,[ne,(0,n.wy)((0,n._)("input",{type:"text",id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>s.username=e),class:"form-control",required:""},null,512),[[o.nr,s.username]])]),(0,n._)("div",re,[se,(0,n.wy)((0,n._)("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>s.password=e),class:"form-control",required:""},null,512),[[o.nr,s.password]])]),le,ie,ce,ue,de,me],32)]),(0,n._)("div",pe,[ge,(0,n._)("form",{onSubmit:t[5]||(t[5]=(0,o.iM)(((...e)=>l.register&&l.register(...e)),["prevent"]))},[(0,n._)("div",fe,[he,(0,n.wy)((0,n._)("input",{type:"text",id:"newUsername","onUpdate:modelValue":t[3]||(t[3]=e=>s.newUsername=e),class:"form-control",required:""},null,512),[[o.nr,s.newUsername]])]),(0,n._)("div",ve,[we,(0,n.wy)((0,n._)("input",{type:"password",id:"newPassword","onUpdate:modelValue":t[4]||(t[4]=e=>s.newPassword=e),class:"form-control",required:""},null,512),[[o.nr,s.newPassword]])]),_e],32)])])])}var ye={data(){return{username:"",password:"",newUsername:"",newPassword:""}},methods:{async login(){try{const e=await H.Z.post("/login",{username:this.username,password:this.password});console.log("Login successful!",e.data),this.$emit("login-success")}catch(e){console.error("Login failed.",e.response.data.message)}},async register(){try{const e=await H.Z.post("/register",{username:this.newUsername,password:this.newPassword});console.log("Registration successful!",e.data)}catch(e){console.error("Registration failed.",e.response.data.message)}}}};const De=(0,K.Z)(ye,[["render",be],["__scopeId","data-v-792db622"]]);var Ue=De,Ce={components:{ConversorComponent:G,LoginComponent:Ue},data(){return{isLoggedIn:!1}},methods:{handleLoginSuccess(){this.isLoggedIn=!0},handleLogout(){this.isLoggedIn=!1}}};const xe=(0,K.Z)(Ce,[["render",l]]);var ke=xe;const Le=a(9585),Se=async()=>{try{await Le.connect("mongodb://127.0.0.1:27017/db?directConnection=true&serverSelectionTimeoutMS=2000&appName=mongosh+2.0.1",{useNewUrlParser:!0,useUnifiedTopology:!0}),console.log("Conectado a MongoDB")}catch(e){console.error("Conexión a MongoDB fallida:",e.message)}};var Fe=Se;H.Z.defaults.baseURL="http://localhost:3000/",H.Z.defaults.headers.common["Authorization"]="",Fe().then((()=>{const e=(0,o.ri)(ke);e.mount("#app")}))}},t={};function a(o){var n=t[o];if(void 0!==n)return n.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,o,n,r){if(!o){var s=1/0;for(u=0;u<e.length;u++){o=e[u][0],n=e[u][1],r=e[u][2];for(var l=!0,i=0;i<o.length;i++)(!1&r||s>=r)&&Object.keys(a.O).every((function(e){return a.O[e](o[i])}))?o.splice(i--,1):(l=!1,r<s&&(s=r));if(l){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[o,n,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,o){var n,r,s=o[0],l=o[1],i=o[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(n in l)a.o(l,n)&&(a.m[n]=l[n]);if(i)var u=i(a)}for(t&&t(o);c<s.length;c++)r=s[c],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(u)},o=self["webpackChunkmy_mongoose_app"]=self["webpackChunkmy_mongoose_app"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=a.O(void 0,[998],(function(){return a(6503)}));o=a.O(o)})();
//# sourceMappingURL=app.0d2a9ea9.js.map